% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/ams-decomposition.R
\name{ams.decomposition}
\alias{ams.decomposition}
\title{Decompose Annual Maximum Streamflow}
\usage{
ams.decomposition(df, scenario)
}
\arguments{
\item{df}{A data frame containing:
\code{max}: numeric vector of annual maximum streamflow values.
\code{year}: any values (will be replaced internally by a scaled covariate).}

\item{scenario}{Integer (1, 2, or 3) indicating which trend component(s) to remove:
1: Remove linear trend in the mean.
2: Remove trend in variance.
3: Remove both mean and variance trends sequentially.}
}
\value{
A numeric vector of the same length as \code{df}, containing the “decomposed”
AMS values with the specified trend(s) removed and adjusted to be strictly
positive.
}
\description{
Removes trends in the means and/or variances of an annual maximum streamflow (AMS)
data using Sen’s slope estimator and a moving‐window variance estimator. Three
scenarios are supported:
\enumerate{
\item Trend in means only
\item Trend in variance only
\item Trends in both means and variance
}
}
\details{
Internally, the function:
\enumerate{
\item Constructs a covariate linearly spaced on \code{[0,1]} over the record length.
\item For scenario 1, fits Sen’s slope (\code{sens.trend}) to (\code{max} vs. covariate)
and removes the fitted linear mean trend.
\item For scenario 2, computes moving‐window standard deviations
(\code{mw.variance}), fits Sen’s slope to those deviations, and rescales the
series to remove variance trends around the overall mean.
\item For scenario 3, applies scenario 1 then scenario 2 sequentially.
\item Ensures all returned values are great than 1 by shifting the data if any negatives occur.
}
}
